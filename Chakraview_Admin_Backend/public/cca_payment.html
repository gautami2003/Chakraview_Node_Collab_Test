<!DOCTYPE html>
<html>

<head>
    <title>CC Avenue Payment Test</title>
</head>

<body>
    <h2>CC Avenue Payment</h2>
    <form id="paymentForm">
        <!-- Order ID: <input type="text" id="orderId" value="58668"><br>
        Amount: <input type="text" id="amount" value="1.00"><br> -->
        Currency: <input type="text" id="currency" value="INR"><br>
        <button type="button" onclick="initiatePayment()">Pay Now</button>
    </form>

    <script>
        async function initiatePayment() {
            const data = {
                // orderId: document.getElementById("orderId").value,
                // amount: document.getElementById("amount").value,
                schoolCode: "140385",
                ThirdInstallment: 1,
                billing_email: "hardik@anhasweb.com"
                // currency: document.getElementById("currency").value,
                // redirectUrl: "http://localhost:8080/api/v1/payments/cca/payment-response",
                // cancelUrl: "http://localhost:8080/api/v1/payments/cca/payment-response"
            };

            const response = await fetch("https://node-parentapp.chakraview.co.in/api/v1/payments/cca/initiate-payment", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify(data)
            });

            let result = await response.json();
            result = result.data;
            console.log(result);
            const form = document.createElement("form");
            form.method = "POST";
            form.action = result.url;

            const accessCode = document.createElement("input");
            accessCode.type = "hidden";
            accessCode.name = "access_code";
            accessCode.value = result.access_code;

            const encRequest = document.createElement("input");
            encRequest.type = "hidden";
            encRequest.name = "encRequest";
            encRequest.value = result.encRequest;

            form.appendChild(accessCode);
            form.appendChild(encRequest);
            document.body.appendChild(form);
            form.submit();
        }
    </script>
</body>

</html>